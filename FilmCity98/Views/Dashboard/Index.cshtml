@model Dashboard

@{
    ViewData["Title"] = "Index";
}

    <head>
        <meta charset="utf-8" />
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    </head>

    <body class="g-sidenav-show bg-gray-100">
@*     <div class="min-height-300 "> </div>
 *@       
        <aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4"
               id="sidenav-main">
            <div class="sidenav-header">
                <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
                   aria-hidden="true"
                   id="iconSidenav"></i>
            <a class="navbar-brand m-0" asp-area="Admin" asp-controller="Dashboard" asp-action="Index"
                   target="_blank">
                    <img src="../assets/img/logo-ct-dark.png"
                         class="navbar-brand-img h-100"
                         alt="main_logo" />
                    <span class="ms-1 font-weight-bold">Movies Dashboard</span>
                </a>
            </div>
            <hr class="horizontal dark mt-0" />
            <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
                <ul class="navbar-nav">
                    <li class="nav-item">
                    <a class="nav-link active"  asp-controller="Dashboard" asp-action="Index">
                            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="ni ni-tv-2 text-primary text-sm opacity-10"></i>
                            </div>
                            <span class="nav-link-text ms-1">Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link active"  asp-controller="Movies" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="fas fa-film text-primary"></i>
                        </div>
                        <span class="nav-link-text ms-1">Movies</span>
                        </a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link"  asp-controller="Actors" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="fas fa-user text-success text-sm opacity-10"></i> <!-- Updated Icon -->
                        </div>
                        <span class="nav-link-text ms-1">Actors</span>
                        </a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link"  asp-controller="Producers" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="ni ni-briefcase-24 text-info text-sm opacity-10"></i> <!-- Updated Icon -->
                        </div>
                        <span class="nav-link-text ms-1">Producers</span>
                        </a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link"  asp-controller="Directors" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="ni ni-user-run text-danger text-sm opacity-10"></i> <!-- Updated Icon -->
                        </div>
                        <span class="nav-link-text ms-1">Directors</span>
                        </a>
                    </li>            
                    <li class="nav-item">
                    <a class="nav-link"  asp-controller="Languages" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="fas fa-globe text-info text-sm opacity-10"></i> <!-- Updated Icon -->
                        </div>
                        <span class="nav-link-text ms-1">Languages</span>
                        </a>
                    </li>            
                    <li class="nav-item">
                    <a class="nav-link"  asp-controller="Countries" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="ni ni-map-big text-success text-sm opacity-10"></i> <!-- Updated Icon -->
                        </div>
                        <span class="nav-link-text ms-1">Countries</span>
                        </a>
                    </li>             
                    <li class="nav-item">
                    <a class="nav-link"  asp-controller="Categories" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="ni ni-tag text-primary text-sm opacity-10"></i> <!-- Updated Icon -->
                        </div>
                        <span class="nav-link-text ms-1">Categories</span>
                        </a>
                    </li>

                    <li class="nav-item mt-3">
                        <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">
                            Account pages
                        </h6>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link"  asp-controller="Users" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="ni ni-single-02 text-dark text-sm opacity-10"></i>
                        </div>
                            <span class="nav-link-text ms-1">Users</span>
                        </a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" asp-area="Admin" asp-controller="Roles" asp-action="Index">
                        <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="ni ni-briefcase-24 text-warning text-sm opacity-10"></i> <!-- Updated Icon -->
                        </div>
                            <span class="nav-link-text ms-1">Roles</span>
                        </a>
                    </li>
                </ul>
            </div>
            
        </aside>
    <div class="container-fluid py-4" style="margin-top: 0vh;">
        <div class="row">
            <div class="col-xl-3 col-sm-6 mb-4">
                <div class="card">
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-8">
                                <div class="numbers">
                                    <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Movies</p>
                                    <h5 class="font-weight-bolder">@Model.TotalMovies</h5>
                                </div>
                            </div>
                            <div class="col-4 text-end">
                                <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                                    <i class="fas fa-film text-lg opacity-10" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-4">
                <div class="card">
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-8">
                                <div class="numbers">
                                    <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Actors</p>
                                    <h5 class="font-weight-bolder">@Model.TotalActors</h5>
                                </div>
                            </div>
                            <div class="col-4 text-end">
                                <div class="icon icon-shape bg-gradient-success shadow-success text-center rounded-circle">
                                    <i class="fas fa-user text-lg opacity-10" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-4">
                <div class="card">
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-8">
                                <div class="numbers">
                                    <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Directors</p>
                                    <h5 class="font-weight-bolder">@Model.TotalDirectors</h5>
                                </div>
                            </div>
                            <div class="col-4 text-end">
                                <div class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
                                    <i class="ni ni-user-run text-lg opacity-10" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-4">
                <div class="card">
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-8">
                                <div class="numbers">
                                    <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Users</p>
                                    <h5 class="font-weight-bolder">@Model.TotalUsers</h5>
                                </div>
                            </div>
                            <div class="col-4 text-end">
                                <div class="icon icon-shape bg-gradient-warning shadow-warning text-center rounded-circle">
                                    <i class="ni ni-single-02 text-lg opacity-10" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Movies Overview -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-header pb-0">
                    <div class="d-flex justify-content-between">
                        <h6>Recent Movies Overview</h6>
                        <a asp-controller="Movies" asp-action="Index" class="btn btn-sm btn-primary">View All</a>
                    </div>
                </div>
                <div class="card-body px-0 pt-0 pb-2">
                    <div class="table-responsive p-0">
                        <table class="table align-items-center mb-0">
                            <thead>
                                <tr>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Movie</th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Category</th>
                                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Release Date</th>
                                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Director</th>
                                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Rating</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var movie in Model.RecentMovies)
                                {
                                    <tr>
                                        <td>
                                            <div class="d-flex px-2 py-1">
                                                <div>
                                                    <img src="https://www.imdb.com/title/tt0111161/mediaviewer/rm3705640450/?ref_=tt_ov_i" class="avatar avatar-sm me-3" alt="@movie.Title">
                                                </div>
                                                <div class="d-flex flex-column justify-content-center">
                                                    <h6 class="mb-0 text-sm">@movie.Title</h6>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="badge badge-sm bg-gradient-success">@movie.Category</span>
                                        </td>
                                        <td class="align-middle text-center">
                                            <span class="text-secondary text-xs font-weight-bold">@movie.ReleaseDate.ToString("MMM dd, yyyy")</span>
                                        </td>
                                        <td class="align-middle text-center">
                                            <span class="text-secondary text-xs font-weight-bold">@movie.Director</span>
                                        </td>
                                        <td class="align-middle text-center">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <span class="me-2 text-xs font-weight-bold">@movie.Rating</span>
                                                <div>
                                                    <div class="progress">
                                                        <div class="progress-bar bg-gradient-info" role="progressbar"
                                                             aria-valuenow="@(movie.Rating * 10)" aria-valuemin="0" aria-valuemax="100"
                                                             style="width: @(movie.Rating * 10)%"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Users Overview -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-header pb-0">
                    <div class="d-flex justify-content-between">
                        <h6>Recent Users Overview</h6>
                        <a asp-controller="Users" asp-action="Index" class="btn btn-sm btn-primary">View All</a>
                    </div>
                </div>
                <div class="card-body px-0 pt-0 pb-2">
                    <div class="table-responsive p-0">
                        <table class="table align-items-center mb-0">
                            <thead>
                                <tr>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">User</th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Role</th>
                                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status</th>
                                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Join Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var user in Model.RecentUsers)
                                {
                                    <tr>
                                        <td>
                                            <div class="d-flex px-2 py-1">
                                                <div>
                                                    <img src="/assets/img/default-avatar.png" class="avatar avatar-sm me-3" alt="user">
                                                </div>
                                                <div class="d-flex flex-column justify-content-center">
                                                    <h6 class="mb-0 text-sm">@user.UserName</h6>
                                                    <p class="text-xs text-secondary mb-0">@user.Email</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="badge badge-sm bg-gradient-info">@user.Role</span>
                                        </td>
                                        <td class="align-middle text-center text-sm">
                                            @if (user.IsActive)
                                            {
                                                <span class="badge badge-sm bg-gradient-success">Active</span>
                                            }
                                            else
                                            {
                                                <span class="badge badge-sm bg-gradient-secondary">Inactive</span>
                                            }
                                        </td>
                                        <td class="align-middle text-center">
                                            <span class="text-secondary text-xs font-weight-bold">@user.JoinDate.ToString("MMM dd, yyyy")</span>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Charts Section -->
    <div class="row mt-4">
        <div class="col-lg-6">
            <div class="card">
                <div class="card-header pb-0">
                    <h6>Movies by Category</h6>
                </div>
                <div class="card-body">
                    <canvas id="moviesCategoryChart" class="chart-canvas" height="300"></canvas>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card">
                <div class="card-header pb-0">
                    <h6>Users by Role</h6>
                </div>
                <div class="card-body">
                    <canvas id="usersRoleChart" class="chart-canvas" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>
    @section Scripts {
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            // Movies by Category Chart
            new Chart(document.getElementById("moviesCategoryChart"), {
                type: 'doughnut',
                data: {
                    labels: @Json.Serialize(Model.MoviesByCategory.Keys),
                    datasets: [{
                        data: @Json.Serialize(Model.MoviesByCategory.Values),
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(153, 102, 255, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Users by Role Chart
            new Chart(document.getElementById("usersRoleChart"), {
                type: 'pie',
                data: {
                    labels: @Json.Serialize(Model.UsersByRole.Keys),
                    datasets: [{
                        data: @Json.Serialize(Model.UsersByRole.Values),
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        </script>
    }
        <!--   Core JS Files   -->
        <script src="../assets/js/core/popper.min.js"></script>
        <script src="../assets/js/core/bootstrap.min.js"></script>
        <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
        <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
        <script src="../assets/js/plugins/chartjs.min.js"></script>

        <!-- Github buttons -->
        <script async defer src="https://buttons.github.io/buttons.js"></script>
        <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
        <script src="~/assets/js/argon-dashboard.min.js?v=2.0.4"></script>
    </body>

